import router from '@ohos.router'
import preferences from '@ohos.data.preferences'
import PreferenceUtil, { Const } from '../utils/PreffrencesUtils'
@Entry
@Component
struct Setting {

  @State fontSize:number = 14;

  onPageShow(){
    PreferenceUtil.get(Const.KEY).then((val:number) => {
      this.fontSize = val;
    })
  }

  build() {
    Column(){
      Row(){
        Text("ğŸ‘ˆ").fontSize(this.fontSize).onClick(e => {
          router.back()
        })
        Text("è®¾ç½®å­—ä½“å¤§å°").fontSize(this.fontSize).margin({left: 15})
      }.margin({top:20,bottom: 20,left:5,right:5}).width("90%").justifyContent(FlexAlign.Start).alignItems(VerticalAlign.Center)
      Column({space: 20}){
        Row(){
          Text("ä½ å¥½å•Šï¼Œåƒé¥­äº†æ²¡æœ‰å•Šï¼Ÿè¦æ‰“å…­ç‚¹äº†å“¦").fontSize(this.fontSize).padding(12).backgroundColor(0x11FF88).fontColor(0X000000).borderRadius(10).width("90%")
          Image($r("app.media.personal_center")).width(26).height(26)
        }.justifyContent(FlexAlign.End).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Image($r("app.media.personal_center")).width(26).height(26)
          Text("åƒäº†å“¦ï¼Œä½ åƒäº†æ²¡æœ‰å•Šï¼Ÿ").fontSize(this.fontSize).padding(12).backgroundColor(0xffffff).borderRadius(10).width("90%")
        }.justifyContent(FlexAlign.Start).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Text("è¿˜æ²¡æœ‰å“¦ï¼Œæ‰ä»å¡ä¸Šå›æ¥è€¶").fontSize(this.fontSize).padding(12).backgroundColor(0x11FF88).fontColor(0X000000).borderRadius(10).width("90%")
          Image($r("app.media.personal_center")).width(26).height(26)
        }.justifyContent(FlexAlign.End).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Image($r("app.media.personal_center")).width(26).height(26)
          Text("åƒå¾—äº†å“¦ï¼Œé©¬ä¸Šè¦å…­ç‚¹äº†ï¼Œä¸æ˜¯å¤šæš—ç³Ÿäº†ï¼Ÿ").fontSize(this.fontSize).padding(12).backgroundColor(0xffffff).borderRadius(10).width("90%")
        }.justifyContent(FlexAlign.Start).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Text("ç…®èµ·çš„ï¼Œé©¬ä¸Šå°±å¥½äº†ã€‚éƒ½å…­ç‚¹äº†ä½ è¿˜èµ°å“ªå“ˆå„¿å»å“¦ï¼Ÿé»‘éƒ½è¦é»‘äº†å“’å˜›").fontSize(this.fontSize).padding(12).backgroundColor(0x11FF88).fontColor(0X000000).borderRadius(10).width("90%")
          Image($r("app.media.personal_center")).width(26).height(26)
        }.justifyContent(FlexAlign.End).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Image($r("app.media.personal_center")).width(26).height(26)
          Text("åˆ‡äº†é¥­å‡ºå»è½¬å“ˆè·¯è€ï¼Œé»‘è¿˜æœ‰ä¸€å“ˆã€‚").fontSize(this.fontSize).padding(12).backgroundColor(0xffffff).borderRadius(10).width("90%")
        }.justifyContent(FlexAlign.Start).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Text("é‚£ä¹Ÿæ˜¯ï¼Œä½ ä¸€ä¸ªäººå¼ƒå“ªå“ˆå„¿è½¬å–").fontSize(this.fontSize).padding(12).backgroundColor(0x11FF88).fontColor(0X000000).borderRadius(10).width("90%")
          Image($r("app.media.personal_center")).width(26).height(26)
        }.justifyContent(FlexAlign.End).alignItems(VerticalAlign.Center).width("90%")
        Row(){
          Image($r("app.media.personal_center")).width(26).height(26)
          Text("éšä¾¿å‘¨å›´è½¬å“ˆå°±æ˜¯").fontSize(this.fontSize).padding(12).backgroundColor(0xffffff).borderRadius(10).width("90%")
        }.justifyContent(FlexAlign.Start).alignItems(VerticalAlign.Center).width("90%")
      }.margin({left:5,right:5,bottom: 20})
      Text("å­—ä½“å¤§å°").width("90%").fontSize(this.fontSize)
      Column(){
        Text(this.fontSize < 8 ? "ç‰¹å°" : (this.fontSize < 10 ? "å°": (this.fontSize < 14 ? "é€‚ä¸­" : (this.fontSize < 16 ? "å¤§" : "ç‰¹å¤§")))).width("100%").textAlign(TextAlign.Center).fontSize(this.fontSize)
        Slider({
          min: 6,
          max: 20,
          step: 1,
          style: SliderStyle.OutSet,
          value: this.fontSize
        }).onChange((val:number,mode:SliderChangeMode) => {
          this.fontSize = val;
          this.persistFontSize()
        })
      }.width("90%").margin({left:5,right:5})
    }.backgroundColor(0xededed).width("100%").height("100%")
  }

  persistFontSize(){
    PreferenceUtil.update(Const.KEY,this.fontSize)
  }
}